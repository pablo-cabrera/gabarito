/*! ilk v0.0.1-alpha.001 | (c) 2015 Pablo José Cabrera Muñoz |  Available via MIT license */
!function(a){"use strict";var b,c;a?(b=global,c=require("./parts")):(b=window,c=window.parts);var d=c.isFunction,e=c.overload,f=c.merge,g=c.constant,h=c.forEach,i=c.args,j=d(Object.defineProperty)&&function(){try{return Object.defineProperty({},"",{}),!0}catch(a){}return!1}()?function(a){return function(b,c){Object.defineProperty(b,a,{enumerable:!1,configurable:!0,writable:!0,value:c})}}:function(a){return function(b,c){b[a]=c}},k=function(a){this.toString=g(a),this.valueOf=this.toString,this.mark=j(a)};f(k,{create:function(){for(var a="abcdefghijklmnopqrstwxyzABCDEFGHIJKLMNOPQRSTWXYZ",b=a.length,c=a.charAt(a.length-1),d=a.charAt(0),e=[],f=[];f.length<32;)f.push(a.charAt(Math.floor(Math.random()*b)));return f=f.join(""),function(){var b,g;for(b=e.length-1;b>-1;b-=1){if(g=e[b],g!==c){e[b]=a.charAt(a.indexOf(g)+1);break}e[b]=d}return-1===b&&e.unshift(d),new k(e.join("")+f)}}(),tokens:function(a){for(var b=[],c=a.length;0!==c;)b.push(k.create()),c-=1;return a.apply(this,b)}});var l=function(a,b){var c=g();return c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a},m=function(a,b){return l(a,b),a.ancestor=b.prototype,p(a),a},n=e({hints:["object",k],method:function(a,b,c){b.mark(a,c)}},{hints:["object","string"],method:function(a,b,c){a[b]=c}}),o={proto:e(function(a,b){return h(b,function(b,c){a.proto(c,b)}),a},function(a,b,c){return n(a.prototype,b,c),a}),constant:e({hints:["function",k],method:function(a,b){return a.constant(b.toString())}},{hints:["function","string"],method:function(a,b){return b in a?a[b]:"ancestor"in a?a.ancestor.constructor.constant(b):void 0}},{hints:["function","object"],method:function(a,b){return h(b,function(b,c){a.constant(c,b)}),a}},function(a,b,c){return n(a,b,c),a})},p=function(a){var b;a.prototype.constant=function(b){return a.constant(b)},a.shared=function(c){return b=c,a},a.descend=e({hints:["function"],method:function(b){return a.descend(b,null)}},{hints:["object"],method:function(b){return a.descend(null,b)}},function(c,d){return c||(c=i(function(b){a.apply(this,b)})),b&&d&&f(d,b),m(c,a).shared(d||b)}),h(o,function(b,c){a[c]=i(function(a){return a.unshift(this),b.apply(this,a)})})},q=function(a){return 0===arguments.length&&(a=g()),p(a),a};f(q,{inherits:m,bond:l,tokens:function(a){return k.tokens.call(k,a)},Token:k}),a?module.exports=q:b.ilk=q}("undefined"!=typeof exports&&global.exports!==exports);